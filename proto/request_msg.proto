syntax = "proto3";
import "message_type.proto";

package proto_msg;


option java_package = "com.github.cristobalm.proto";
option java_outer_classname = "RequestMsg";

message CacheRequest{
    MessageType request_type = 1;

    oneof response {
        CacheCheckRequest cache_check_request = 2;
        CacheFeedRequest cache_feed_request = 3;
        CacheRetrieveRequest cache_retrieve_request = 4;
        ConnectionEndRequest connection_end_request = 5;

        CacheFeedFullK2TreeRequest cache_feed_full_k2tree_request = 6;

    }
}

message CacheCheckRequest{
    string query_label = 1;
}

message CacheFeedRequest{
    string query_label = 1;
    repeated RDFTriple rdf_triples = 2;
}

message CacheRetrieveRequest{
    string query_label = 1;
}

message ConnectionEndRequest{
    bool end = 1;
}

message CacheFeedFullK2TreeRequest{
    uint64 predicate_index = 1;
    uint64 tree_depth = 2;
    repeated SubjectObjectPair subject_object_pair = 3;
}

message SubjectObjectPair{
    uint64 subject = 1;
    uint64 object = 2;
}

message RDFTriple {
    uint64 subject = 1;
    uint64 predicate = 2;
    uint64 object = 3;
}